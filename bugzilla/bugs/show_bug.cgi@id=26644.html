<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="robots" content="noindex,noarchive,nofollow">
    <title>Bug 26644 &ndash; High CPU usage (&gt;40%) by &quot;Renew License&quot; button</title>


<link rel="Top" href="https://www.mozdev.org/bugs/">

  

  


  
    <link rel="Show" title="Dependency Tree"
          href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26644&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26644">


      <link rel="Show" title="Bug Activity"
            href="https://www.mozdev.org/bugs/show_activity.cgi?id=26644">
      <link rel="Show" title="Printer-Friendly Version"
            href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26644">


    

    <script type="text/javascript">
  <!--
  
  function initHelp() {}
  // -->
  </script>

    

    
      <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
            rel="stylesheet"
            type="text/css">
    <!--[if IE]>
      
      <link href="skins/standard/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    
        <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <!--[if IE]>
        
        <link href="skins/standard/IE-fixes.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <![endif]-->

    

    

    
        <link href="https://www.mozdev.org/bugs/skins/custom/global.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
      
      <link href="skins/custom/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    <link href="https://www.mozdev.org/sharedimages/mozdev-icon.png" rel="icon" type="image/png">
    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozdev" href="https://www.mozdev.org/bugs/search_plugin.cgi">
                                          
  </head>



  <body onload=""
        class="www-mozdev-org-bugs bz_bug bz_status_RESOLVED bz_component_General bz_bug_26644">




<div id="header">
<div id="banner">
  </div>

<div id="mozdev-logolet">
<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla@Mozdev &ndash; Bug&nbsp;26644</p>
    </td>

    <td id="subtitle">
      <p class="subheader">High CPU usage (&gt;40%) by &quot;Renew License&quot; button</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2020-05-30 14:25:57</p>
    </td>
</tr>
</table>
</div>

<ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_top"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26644&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>

</div>

<div id="bugzilla-body">

<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<hr>
<script type="text/javascript">
  <!--

  /* Outputs a link to call replyToComment(); used to reduce HTML output */
  function addReplyLink(id) {
      /* XXX this should really be updated to use the DOM Core's
       * createElement, but finding a container isn't trivial.
       */
      document.write('[<a href="#add_comment" onclick="replyToComment(' + 
                     id + ');">reply<' + '/a>]');
  }

  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id) {
      /* pre id="comment_name_N" */
      var text_elem = document.getElementById('comment_text_'+id);
      var text = getText(text_elem);

      /* make sure we split on all newlines -- IE or Moz use \r and \n
       * respectively.
       */
      text = text.split(/\r|\n/);

      var replytext = "";
      for (var i=0; i < text.length; i++) {
          replytext += "> " + text[i] + "\n"; 
      }

      replytext = "(In reply to comment #" + id + ")\n" + replytext + "\n";


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      textarea.value += replytext;

      textarea.focus();
  }

  if (typeof Node == 'undefined') {
      /* MSIE doesn't define Node, so provide a compatibility object */
      window.Node = {
          TEXT_NODE: 3,
          ENTITY_REFERENCE_NODE: 5
      };
  }

  /* Concatenates all text from element's childNodes. This is used
   * instead of innerHTML because we want the actual text (and
   * innerText is non-standard).
   */
  function getText(element) {
      var child, text = "";
      for (var i=0; i < element.childNodes.length; i++) {
          child = element.childNodes[i];
          var type = child.nodeType;
          if (type == Node.TEXT_NODE || type == Node.ENTITY_REFERENCE_NODE) {
              text += child.nodeValue;
          } else {
              /* recurse into nodes of other types */
              text += getText(child);
          }
      }
      return text;
  }


  function updateCommentTagControl(checkbox, form) {
      if (checkbox.checked) {
          form.comment.className='bz_private';
      } else {
          form.comment.className='';
      }
  }

  //-->
  </script>

<form name="changeform" method="post" action="https://www.mozdev.org/bugs/process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2020-05-30 14:25:57">
  <input type="hidden" name="longdesclength" value="13">
  <input type="hidden" name="id" value="26644">

  
  <table>
    <tr>
      <td valign="top">
        <fieldset>
          <legend>Details</legend>
          <table>

            
            <tr>
              <td align="right">
                <label for="short_desc" accesskey="s"><b><u>S</u>ummary</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="short_desc" id="short_desc"
              value="High CPU usage (&gt;40%) by &quot;Renew License&quot; button">High CPU usage (&gt;40%) by &quot;Renew License&quot; button
  </td>
            </tr>

            <tr>
              <td colspan="3">
                <table>
                  <tr>
                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <b>Bug#</b>:
      </td>
      <td>
        <a href="show_bug.cgi@id=26644.html">26644</a>
      </td>
    </tr>


    <tr>
      <td align="right">
        <label for="product" accesskey="p"><b><u>P</u>roduct</b></label>:
      </td><td>
      <input type="hidden" id="product" name="product" value="QuickFolders">QuickFolders
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="component" accesskey="m"><b><a href="https://www.mozdev.org/bugs/describecomponents.cgi?product=QuickFolders">Co<u>m</u>ponent</a></b></label>:
      </td><td>
      <input type="hidden" id="component" name="component" value="General">General
  </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#status">Status</a></b>:
      </td>
      <td>RESOLVED</td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#resolution">Resolution</a></b>:
      </td>
      <td>FIXED
      </td>
    </tr>
  </table></td>

                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <label for="rep_platform" accesskey="h"><b><u>H</u>ardware</b></label>:
      </td><td>
      <input type="hidden" id="rep_platform" name="rep_platform" value="PC">PC
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="op_sys" accesskey="o"><b><u>O</u>S</b></label>:
      </td><td>
      <input type="hidden" id="op_sys" name="op_sys" value="Windows NT">Windows NT
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="version"><b>Version</b></label>:
      </td><td>
      <input type="hidden" id="version" name="version" value="unspecified">unspecified
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="priority" accesskey="i"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#priority">Pr<u>i</u>ority</a></b></label>:
      </td><td>
      <input type="hidden" id="priority" name="priority" value="P2">P2
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="bug_severity"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#bug_severity">Severity</a></b></label>:
      </td><td>
      <input type="hidden" id="bug_severity" name="bug_severity" value="normal">normal
  </td>
    </tr>

      <tr>
        <td align="right">
          <label for="target_milestone"><b>
            Target Milestone</b></label>:
        </td><td>
      <input type="hidden" id="target_milestone" name="target_milestone" value="---">---
  </td>
      </tr>
  </table></td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td colspan="3"><hr size="1"></td>
            </tr>

            

            <tr>
              <td align="right">
                <label for="bug_file_loc" accesskey="u"><b>
                    <u>U</u>RL</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="bug_file_loc" id="bug_file_loc"
              value="">
  </td>
            </tr>

              <tr>
                <td align="right">
                  <label for="status_whiteboard" accesskey="w"><b><u>W</u>hiteboard</b></label>:
                </td><td colspan="2">
       <input type="hidden" name="status_whiteboard" id="status_whiteboard"
              value="">
  </td>
              </tr>

              <tr>
                <td align="right">
                  <label for="keywords" accesskey="k">
                    <b><a href="https://www.mozdev.org/bugs/describekeywords.cgi"><u>K</u>eywords</a></b></label>:
                </td><td colspan="2">
       <input type="hidden" name="keywords" id="keywords"
              value="">
  </td>
              </tr>

            


            

            <tr><th align="right">
    <label for="dependson">Depends&nbsp;on</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="dependson" name="dependson"
             value="">
  </td>
            </tr>

            <tr><th align="right">
    <label for="blocked" accesskey="b"><u>B</u>locks</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="blocked" name="blocked"
             value="">
  </td>
            </tr>

            <tr>
              <th>&nbsp;</th>

              <td colspan="2">
                <a href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26644&amp;hide_resolved=1">Show
                   dependency tree</a>

                  - <a href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26644">Show
                       dependency graph</a>
              </td>
            </tr>
          </table>
        </fieldset>
      </td>

      
      <script type="text/javascript">
        <!--
        var v = document.body.offsetHeight;
        //-->
      </script>

      <td valign="top">
        
        <fieldset>
          <legend>People</legend><table cellpadding="1" cellspacing="1">
    <tr>
      <td align="right">
        <b>Reporter</b>:
      </td>
      <td>
        <a href="mailto:axel.grude&#64;gmail.com">Axel Grude &lt;axel.grude&#64;gmail.com&gt;</a>
      </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#assigned_to">Assigned&nbsp;To</a></b>:
      </td>
      <td>
        <a href="mailto:axel.grude&#64;gmail.com">Axel Grude &lt;axel.grude&#64;gmail.com&gt;</a>
      </td>
    </tr>



    <tr>
        <td align="right" valign="top">
          <label for="cc"><b>CC</b></label>:
        </td>
        <td valign="top">
          <select id="cc" name="cc" multiple="multiple" size="5">
            <option value="alexandermalfait&#64;gmail.com">alexandermalfait&#64;gmail.com</option>
          </select>
        </td>
    </tr>
  </table>
        </fieldset>

        
      </td>
    </tr>
  </table>



<script type="text/javascript">
  <!--
  function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var rows = table.getElementsByTagName("tr");
    var originalHeight = table.offsetHeight; // Store current height for scrolling

    var toggle;
    if (link.innerHTML == "Show Obsolete") {
      toggle = ""; // This should be 'table-row', but IE 6 doesn't understand it.
      link.innerHTML = "Hide Obsolete";
    }
    else {
      toggle = "none";
      link.innerHTML = "Show Obsolete";
    }

    for (var i = 0; i < rows.length; i++) {
      if (rows[i].className.match('bz_tr_obsolete'))
        rows[i].style.display = toggle;
    }

    var newHeight = table.offsetHeight;
    window.scrollBy(0, newHeight - originalHeight);

    return false;
  }
  //-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr>
    <th colspan="3" align="left">
      <a name="a0" id="a0">Attachments</a>
    </th>
  </tr>


      <tr class="
                 ">
        <td valign="top">
            <a name="a1" href="RenewLicense.png"
               title="View the content of the attachment">
          <b>Renew License button</b></a>

          <span class="bz_attach_extra_info">
              (7.17 KB,
                image/png)

            <br>
            <a href="show_bug.cgi@id=26644.html#attach_8595"
               title="Go to the comment associated with the attachment">2019-02-22 14:12</a>,

            <a href="mailto:tmetro-mozilla&#64;tommetro.com"
               title="Write an email to the creator of the attachment">Tom Metro
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8595&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 bz_tr_obsolete">
        <td valign="top">
            <a name="a2" href="QuickFolders-tb-pb-sm-4.13.2pre3.xpi"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">4.13.2 prerelease 3</span></b></a>

          <span class="bz_attach_extra_info">
              (986.77 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26644.html#attach_8597"
               title="Go to the comment associated with the attachment">2019-02-23 07:22</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8597&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 ">
        <td valign="top">
            <a name="a3" href="QuickFolders-tb-pb-sm-4.13.2pre31.xpi"
               title="View the content of the attachment">
          <b>4.13.2 prerelease 31</b></a>

          <span class="bz_attach_extra_info">
              (987.61 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26644.html#attach_8598"
               title="Go to the comment associated with the attachment">2019-02-24 13:57</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8598&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a href="show_bug.cgi@id=26644.html#a0" onClick="return toggle_display(this);">Hide Obsolete</a> (1)
        </span>
      <a href="https://www.mozdev.org/bugs/attachment.cgi?bugid=26644&amp;action=enter">Add an attachment</a>
      (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>




  <br>
  <table cellpadding="1" cellspacing="1">
    <tr>
      <td>
          <fieldset>
            <legend>Note</legend>
            <p>
              You need to
              <a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26644&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </p>
          </fieldset>
      </td>

      <td valign="top">
        <fieldset>
          <legend>Related actions</legend>
          <ul>
            <li><a href="https://www.mozdev.org/bugs/show_activity.cgi?id=26644">View Bug Activity</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26644">Format For Printing</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?ctype=xml&amp;id=26644">XML</a></li>
            <li><a href="https://www.mozdev.org/bugs/enter_bug.cgi?cloned_bug_id=26644">Clone This Bug</a></li>
          </ul>


          
        </fieldset>
      </td>
    </tr>
  </table>
  <br>





<hr>

<div id="comments"><script type="text/javascript">
  <!--
  function updateCommentPrivacy(checkbox, id) {
    var comment_elem = document.getElementById('comment_text_'+id).parentNode;
    if (checkbox.checked) {
      if (!comment_elem.className.match('bz_private')) {
        comment_elem.className = comment_elem.className.concat(' bz_private');
      }
    }
    else {
      comment_elem.className =
        comment_elem.className.replace(/(\s*|^)bz_private(\s*|$)/, '$2');
    }
  }
  //-->
  </script>








<div class="bz_comment">
        <table>
          <tr>
            <th align="left">
              <b><a name="c0" href="show_bug.cgi@id=26644.html#c0">
                Description</a>:</b>&nbsp;&nbsp;
            </th>
            <td align="left" width="30%">
              <b>Opened:</b> 2019-02-22 13:20
            </td>
          </tr>
        </table>
        


<pre class="bz_comment_text" >Apparently on Linux system the Animation on the Renewal button (pulsing
box-shadow) is taking up a lot of CPU on a users system system (&gt;40%);

he discovered that when he hovers the mouse over that button, causing the
animation to stop, the CPU use plummets (~6%).
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c1" href="show_bug.cgi@id=26644.html#c1">
            #1</a> From 
          <a href="mailto:tmetro-mozilla&#64;tommetro.com">Tom Metro</a>
          2019-02-22 14:12:08 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="RenewLicense.png" name="attach_8595" title="Renew License button">Created an attachment (id=8595)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8595&amp;action=edit" title="Renew License button">[details]</a></span>
Renew License button

<span class="quote">&gt;Can you please provide a screenshot so I know where exactly?</span >
Attached.


<span class="quote">&gt; (top left of the QF toolbar or a notification at the bottom?)</span >
Top left of the QF toolbar.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c2" href="show_bug.cgi@id=26644.html#c2">
            #2</a> From 
          <a href="mailto:tmetro-mozilla&#64;tommetro.com">Tom Metro</a>
          2019-02-22 14:15:23 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="quote">&gt;It may be a Linux specific issue (maybe affect Linux where there are no optimized 3d drivers).</span >
Could be.

<span class="quote">&gt;I just want my users to be able to see the button without outright using &quot;blinking&quot; if you know what I mean.</span >
Yup.

<span class="quote">&gt;It's important that I keep fundraising...</span >
Understood. I wasn't suggesting elimination.

<span class="quote">&gt;I will look into replacing it with something else.</span >
Sounds good.

<span class="quote">&gt;A simple animation shouldn't take up CPU like this.</span >
Agreed.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c3" href="show_bug.cgi@id=26644.html#c3">
            #3</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-23 07:22:20 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="bz_obsolete"><a href="QuickFolders-tb-pb-sm-4.13.2pre3.xpi" name="attach_8597" title="4.13.2 prerelease 3">Created an attachment (id=8597)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8597&amp;action=edit" title="4.13.2 prerelease 3">[details]</a></span>
4.13.2 prerelease 3

Test version, with different animation.

Here is an interesting article on how keyframes in CSS3 give 40% CPU usage:

<a href="https://stackoverflow.com/questions/13176746/css-keyframe-animation-cpu-usage-is-high-should-it-be-this-way/13293044">https://stackoverflow.com/questions/13176746/css-keyframe-animation-cpu-usage-is-high-should-it-be-this-way/13293044</a>

I will add a test version with a different animation (using opacity, please
test whether it does anything) - also using the translateZ hack - it may or may
not be applicable to the Thunderbird CSS rendering engine.

note there is a 60s delay before it starts, so please check whether (and by how
much) CPU usage goes up 1 min after restarting Thunderbird.

IMPORTANT: IN this version, I removed some Asian locales because there is a
limit to attachment size on mozdev.org. This test version won't fully work in
Japanese, Chinese , Vietnamese locales.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c4" href="show_bug.cgi@id=26644.html#c4">
            #4</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-23 07:49:14 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >one problem I didn't think of: there is another tiny animation in the options
menu (click the blue cogwheel to see it at the bottom)

I am not sure whether this has any effect when the menu isn't used or whether
it impacts performance right away? Also does the CPU boost go way when the menu
is hidden again?
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c5" href="show_bug.cgi@id=26644.html#c5">
            #5</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-23 12:42:51 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26644.html#c4">comment #4</a>)
<span class="quote">&gt; one problem I didn't think of: there is another tiny animation in the options
&gt; menu (click the blue cogwheel to see it at the bottom)
&gt; 
&gt; I am not sure whether this has any effect when the menu isn't used or whether
&gt; it impacts performance right away? Also does the CPU boost go way when the menu
&gt; is hidden again?
&gt; </span >

Also I still am havin problems with making the platform specific (linux only)
rules work. I resurreceted my ubuntu 16 Virtualbox VM and realised that none of
the platform specific rules currently are loaded. Spent a few hours on this
scratching my head...
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c6" href="show_bug.cgi@id=26644.html#c6">
            #6</a> From 
          <a href="mailto:tmetro-mozilla&#64;tommetro.com">Tom Metro</a>
          2019-02-24 00:22:36 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="quote">&gt;test version with a different animation</span >
Sorry, it's essentially the same.

I was seeing 35 - 38% under some circumstances, but then a few minutes later I
was seeing 40% +/-2%.

(When I first went to test the prerelease version, I couldn't get CPU usage to
drop even when I stopped the animation. I tried disabling QF as a sanity check,
verifying CPU dropped, and validating QF as the cause. Then I discovered that I
could get it to drop once I closed the &quot;what new&quot; HTML page that QF opens in a
tab upon a new version install. I gather that page has some CSS animations
too.)

<span class="quote">&gt;tiny animation in the options menu</span >
Showing the menu essentially had no effect. Under some circumstances opening
the menu caused a few percentage increase, and in other circumstances a few
percentage decrease.

(In all cases I watched the CPU usage of TB over the span of a few minutes to
see how it averaged out, and I shut down or suspended other processes on the
system that were or might be using notable amounts of CPU.)
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c7" href="show_bug.cgi@id=26644.html#c7">
            #7</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-24 01:41:53 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26644.html#c6">comment #6</a>)
<span class="quote">&gt; &gt;test version with a different animation
&gt; Sorry, it's essentially the same.
&gt; 
&gt; I was seeing 35 - 38% under some circumstances, but then a few minutes later I
&gt; was seeing 40% +/-2%.
&gt; </span >
I got about 15% CPU (without the update tab showing) - this is in a Ubuntu
Virtual Machine which may well be supporting graphics acceleeration. Which
version of Linux are you running?

My main problem is currently specifying platform specific rules using the
&quot;platform&quot; and &quot;os&quot; modifiers in my install manifest for a content path
pointing to different CSS files - it doesn't appear to work (anymore?)

could be a deprecation in the Mozilla codebase that broke this stuff. I am on
the road most of today but I will try some different way again next week. If
all else fails, I will try to load the CSS using JavaScript because at least
there I am able to determine the Operating System reliably.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c8" href="show_bug.cgi@id=26644.html#c8">
            #8</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-24 13:57:31 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="QuickFolders-tb-pb-sm-4.13.2pre31.xpi" name="attach_8598" title="4.13.2 prerelease 31">Created an attachment (id=8598)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8598&amp;action=edit" title="4.13.2 prerelease 31">[details]</a></span>
4.13.2 prerelease 31

I found a way to load the styles dynamically. Unforunately I wasn't able to
actually load the xpi in my Ubuntu as a file (might be a permissions problem
with my shared folder) - it says &quot;This add-on could not be installed because it
appeears to be corrupt&quot; - still hoping I might be able to install it in the VM
if I download it from here. It does install in Windows and loads platform
specific CSS. (A different simpler animation for the renew button, and no
animation for the animated options menu item)
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c9" href="show_bug.cgi@id=26644.html#c9">
            #9</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-24 14:06:30 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26644.html#c8">comment #8</a>)
<span class="quote">&gt; Created an <span class=""><a href="QuickFolders-tb-pb-sm-4.13.2pre31.xpi" name="attach_8598" title="4.13.2 prerelease 31">attachment (id=8598)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8598&amp;action=edit" title="4.13.2 prerelease 31">[details]</a></span> [details]
&gt; 4.13.2 prerelease 31
&gt; 
&gt; I found a way to load the styles dynamically. Unforunately I wasn't able to
&gt; actually load the xpi in my Ubuntu as a file (might be a permissions problem
&gt; with my shared folder) - it says &quot;This add-on could not be installed because it
&gt; appeears to be corrupt&quot; - still hoping I might be able to install it in the VM
&gt; if I download it from here. It does install in Windows and loads platform
&gt; specific CSS. (A different simpler animation for the renew button, and no
&gt; animation for the animated options menu item)
&gt; </span >

I managed to install the new version from here in Linux and it appears to make
a difference. The new animation changes opacity instead of animating
box-shadow. CPU drops from 15% to 2%, so I hope it makes a difference on other
systems, too. Note this will only affect Linux systems. I am loading different
styles in Windows / Mac.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c10" href="show_bug.cgi@id=26644.html#c10">
            #10</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2019-02-25 14:18:18 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >Resolve FIXED with Release 4.13.2 at 25/02/2019

note - on Linux you may have to CLOSE version history tab for lower CPU
consumption.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c11" href="show_bug.cgi@id=26644.html#c11">
            #11</a> From 
          <a href="mailto:tmetro-mozilla&#64;tommetro.com">Tom Metro</a>
          2019-03-01 14:08:22 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="quote">&gt;Resolve FIXED with Release 4.13.2 at 25/02/2019</span >
I've been busy elsewhere, but noticed yesterday that the CPU usage had dropped
and the animation looked different. Apparently TB auto-updated the extension.

<span class="quote">&gt;The new animation changes opacity instead of animating box-shadow. CPU drops
&gt;from 15% to 2%, so I hope it makes a difference...</span >
Yes, that seems to have done it. I'm seeing &lt;10% use generally, and around 6%
much of the time, which if I recall was the baseline that I'd see when Quick
Folders was disabled.

Thank you for addressing this.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c12" href="show_bug.cgi@id=26644.html#c12">
            #12</a> From 
          <a href="mailto:tmetro-mozilla&#64;tommetro.com">Tom Metro</a>
          2020-05-30 14:25:57 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >I thought we had resolved this, but coincident with the &quot;renew license&quot; button
reappearing recently the fan has been running more on my laptop.

TB itself is still only running at about 7-8% CPU, but the desktop (Cinnamon)
seems to be sustaining mid-20%. So it would appear that the side effect of the
animation is to drive up the CPU in other display-related processs.

Within 60 seconds of exiting TB the fan winds down and the desktop CPU usage
drops below 8%.
</pre>
    </div>
</div>

</form>

<hr>
<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions">
    <div class="label">Actions: </div><ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_bottom"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26644&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>
  </li>

  
    
    
    

  


  
</ul>

  <div class="outro"></div>
</div>

</body>
</html>