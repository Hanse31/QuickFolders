<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="robots" content="noindex,noarchive,nofollow">
    <title>Bug 26340 &ndash; Unchanged Field Option for %To()%, %CC()% and %From()%</title>


<link rel="Top" href="https://www.mozdev.org/bugs/">

  

  


  
    <link rel="Show" title="Dependency Tree"
          href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26340&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26340">


      <link rel="Show" title="Bug Activity"
            href="https://www.mozdev.org/bugs/show_activity.cgi?id=26340">
      <link rel="Show" title="Printer-Friendly Version"
            href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26340">


    

    <script type="text/javascript">
  <!--
  
  function initHelp() {}
  // -->
  </script>

    

    
      <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
            rel="stylesheet"
            type="text/css">
    <!--[if IE]>
      
      <link href="skins/standard/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    
        <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <!--[if IE]>
        
        <link href="skins/standard/IE-fixes.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <![endif]-->

    

    

    
        <link href="https://www.mozdev.org/bugs/skins/custom/global.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
      
      <link href="skins/custom/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    <link href="https://www.mozdev.org/sharedimages/mozdev-icon.png" rel="icon" type="image/png">
    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozdev" href="https://www.mozdev.org/bugs/search_plugin.cgi">
                                          
  </head>



  <body onload=""
        class="www-mozdev-org-bugs bz_bug bz_status_RESOLVED bz_component_General bz_bug_26340">




<div id="header">
<div id="banner">
  </div>

<div id="mozdev-logolet">
<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla@Mozdev &ndash; Bug&nbsp;26340</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Unchanged Field Option for %To()%, %CC()% and %From()%</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2018-04-27 02:08:00</p>
    </td>
</tr>
</table>
</div>

<ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_top"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26340&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>

</div>

<div id="bugzilla-body">

<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<hr>
<script type="text/javascript">
  <!--

  /* Outputs a link to call replyToComment(); used to reduce HTML output */
  function addReplyLink(id) {
      /* XXX this should really be updated to use the DOM Core's
       * createElement, but finding a container isn't trivial.
       */
      document.write('[<a href="#add_comment" onclick="replyToComment(' + 
                     id + ');">reply<' + '/a>]');
  }

  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id) {
      /* pre id="comment_name_N" */
      var text_elem = document.getElementById('comment_text_'+id);
      var text = getText(text_elem);

      /* make sure we split on all newlines -- IE or Moz use \r and \n
       * respectively.
       */
      text = text.split(/\r|\n/);

      var replytext = "";
      for (var i=0; i < text.length; i++) {
          replytext += "> " + text[i] + "\n"; 
      }

      replytext = "(In reply to comment #" + id + ")\n" + replytext + "\n";


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      textarea.value += replytext;

      textarea.focus();
  }

  if (typeof Node == 'undefined') {
      /* MSIE doesn't define Node, so provide a compatibility object */
      window.Node = {
          TEXT_NODE: 3,
          ENTITY_REFERENCE_NODE: 5
      };
  }

  /* Concatenates all text from element's childNodes. This is used
   * instead of innerHTML because we want the actual text (and
   * innerText is non-standard).
   */
  function getText(element) {
      var child, text = "";
      for (var i=0; i < element.childNodes.length; i++) {
          child = element.childNodes[i];
          var type = child.nodeType;
          if (type == Node.TEXT_NODE || type == Node.ENTITY_REFERENCE_NODE) {
              text += child.nodeValue;
          } else {
              /* recurse into nodes of other types */
              text += getText(child);
          }
      }
      return text;
  }


  function updateCommentTagControl(checkbox, form) {
      if (checkbox.checked) {
          form.comment.className='bz_private';
      } else {
          form.comment.className='';
      }
  }

  //-->
  </script>

<form name="changeform" method="post" action="https://www.mozdev.org/bugs/process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2018-04-27 02:08:00">
  <input type="hidden" name="longdesclength" value="6">
  <input type="hidden" name="id" value="26340">

  
  <table>
    <tr>
      <td valign="top">
        <fieldset>
          <legend>Details</legend>
          <table>

            
            <tr>
              <td align="right">
                <label for="short_desc" accesskey="s"><b><u>S</u>ummary</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="short_desc" id="short_desc"
              value="Unchanged Field Option for %To()%, %CC()% and %From()%">Unchanged Field Option for %To()%, %CC()% and %From()%
  </td>
            </tr>

            <tr>
              <td colspan="3">
                <table>
                  <tr>
                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <b>Bug#</b>:
      </td>
      <td>
        <a href="show_bug.cgi@id=26340.html">26340</a>
      </td>
    </tr>


    <tr>
      <td align="right">
        <label for="product" accesskey="p"><b><u>P</u>roduct</b></label>:
      </td><td>
      <input type="hidden" id="product" name="product" value="smarttemplate4">smarttemplate4
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="component" accesskey="m"><b><a href="https://www.mozdev.org/bugs/describecomponents.cgi?product=smarttemplate4">Co<u>m</u>ponent</a></b></label>:
      </td><td>
      <input type="hidden" id="component" name="component" value="General">General
  </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#status">Status</a></b>:
      </td>
      <td>RESOLVED</td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#resolution">Resolution</a></b>:
      </td>
      <td>FIXED
      </td>
    </tr>
  </table></td>

                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <label for="rep_platform" accesskey="h"><b><u>H</u>ardware</b></label>:
      </td><td>
      <input type="hidden" id="rep_platform" name="rep_platform" value="Macintosh">Macintosh
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="op_sys" accesskey="o"><b><u>O</u>S</b></label>:
      </td><td>
      <input type="hidden" id="op_sys" name="op_sys" value="Mac OS X 10.4">Mac OS X 10.4
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="version"><b>Version</b></label>:
      </td><td>
      <input type="hidden" id="version" name="version" value="unspecified">unspecified
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="priority" accesskey="i"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#priority">Pr<u>i</u>ority</a></b></label>:
      </td><td>
      <input type="hidden" id="priority" name="priority" value="P3">P3
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="bug_severity"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#bug_severity">Severity</a></b></label>:
      </td><td>
      <input type="hidden" id="bug_severity" name="bug_severity" value="enhancement">enhancement
  </td>
    </tr>

      <tr>
        <td align="right">
          <label for="target_milestone"><b>
            Target Milestone</b></label>:
        </td><td>
      <input type="hidden" id="target_milestone" name="target_milestone" value="---">---
  </td>
      </tr>
  </table></td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td colspan="3"><hr size="1"></td>
            </tr>

            

            <tr>
              <td align="right">
                <label for="bug_file_loc" accesskey="u"><b>
                    <u>U</u>RL</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="bug_file_loc" id="bug_file_loc"
              value="">
  </td>
            </tr>

              <tr>
                <td align="right">
                  <label for="status_whiteboard" accesskey="w"><b><u>W</u>hiteboard</b></label>:
                </td><td colspan="2">
       <input type="hidden" name="status_whiteboard" id="status_whiteboard"
              value="">
  </td>
              </tr>

              <tr>
                <td align="right">
                  <label for="keywords" accesskey="k">
                    <b><a href="https://www.mozdev.org/bugs/describekeywords.cgi"><u>K</u>eywords</a></b></label>:
                </td><td colspan="2">
       <input type="hidden" name="keywords" id="keywords"
              value="">
  </td>
              </tr>

            


            

            <tr><th align="right">
    <label for="dependson">Depends&nbsp;on</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="dependson" name="dependson"
             value="">
  </td>
            </tr>

            <tr><th align="right">
    <label for="blocked" accesskey="b"><u>B</u>locks</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="blocked" name="blocked"
             value="">
  </td>
            </tr>

            <tr>
              <th>&nbsp;</th>

              <td colspan="2">
                <a href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26340&amp;hide_resolved=1">Show
                   dependency tree</a>

                  - <a href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26340">Show
                       dependency graph</a>
              </td>
            </tr>
          </table>
        </fieldset>
      </td>

      
      <script type="text/javascript">
        <!--
        var v = document.body.offsetHeight;
        //-->
      </script>

      <td valign="top">
        
        <fieldset>
          <legend>People</legend><table cellpadding="1" cellspacing="1">
    <tr>
      <td align="right">
        <b>Reporter</b>:
      </td>
      <td>
        <a href="mailto:a.fontana&#64;ymail.com">Alessandro &lt;a.fontana&#64;ymail.com&gt;</a>
      </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#assigned_to">Assigned&nbsp;To</a></b>:
      </td>
      <td>
        <a href="mailto:axel.grude&#64;gmail.com">Axel Grude &lt;axel.grude&#64;gmail.com&gt;</a>
      </td>
    </tr>



    <tr>
        <td align="right" valign="top">
          <label for="cc"><b>CC</b></label>:
        </td>
        <td valign="top">
          <select id="cc" name="cc" multiple="multiple" size="5">
            <option value="smarttemplate4&#64;posteo.de">smarttemplate4&#64;posteo.de</option>
          </select>
        </td>
    </tr>
  </table>
        </fieldset>

        
      </td>
    </tr>
  </table>



<script type="text/javascript">
  <!--
  function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var rows = table.getElementsByTagName("tr");
    var originalHeight = table.offsetHeight; // Store current height for scrolling

    var toggle;
    if (link.innerHTML == "Show Obsolete") {
      toggle = ""; // This should be 'table-row', but IE 6 doesn't understand it.
      link.innerHTML = "Hide Obsolete";
    }
    else {
      toggle = "none";
      link.innerHTML = "Show Obsolete";
    }

    for (var i = 0; i < rows.length; i++) {
      if (rows[i].className.match('bz_tr_obsolete'))
        rows[i].style.display = toggle;
    }

    var newHeight = table.offsetHeight;
    window.scrollBy(0, newHeight - originalHeight);

    return false;
  }
  //-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr>
    <th colspan="3" align="left">
      <a name="a0" id="a0">Attachments</a>
    </th>
  </tr>


      <tr class="
                 ">
        <td valign="top">
            <a name="a1" href="smartTemplate-1.5pre16.xpi"
               title="View the content of the attachment">
          <b>1.5 prerelease 16</b></a>

          <span class="bz_attach_extra_info">
              (388.57 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26340.html#attach_8264"
               title="Go to the comment associated with the attachment">2017-02-14 07:37</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8264&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
        </span>
      <a href="https://www.mozdev.org/bugs/attachment.cgi?bugid=26340&amp;action=enter">Add an attachment</a>
      (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>




  <br>
  <table cellpadding="1" cellspacing="1">
    <tr>
      <td>
          <fieldset>
            <legend>Note</legend>
            <p>
              You need to
              <a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26340&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </p>
          </fieldset>
      </td>

      <td valign="top">
        <fieldset>
          <legend>Related actions</legend>
          <ul>
            <li><a href="https://www.mozdev.org/bugs/show_activity.cgi?id=26340">View Bug Activity</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26340">Format For Printing</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?ctype=xml&amp;id=26340">XML</a></li>
            <li><a href="https://www.mozdev.org/bugs/enter_bug.cgi?cloned_bug_id=26340">Clone This Bug</a></li>
          </ul>


          
        </fieldset>
      </td>
    </tr>
  </table>
  <br>





<hr>

<div id="comments"><script type="text/javascript">
  <!--
  function updateCommentPrivacy(checkbox, id) {
    var comment_elem = document.getElementById('comment_text_'+id).parentNode;
    if (checkbox.checked) {
      if (!comment_elem.className.match('bz_private')) {
        comment_elem.className = comment_elem.className.concat(' bz_private');
      }
    }
    else {
      comment_elem.className =
        comment_elem.className.replace(/(\s*|^)bz_private(\s*|$)/, '$2');
    }
  }
  //-->
  </script>








<div class="bz_comment">
        <table>
          <tr>
            <th align="left">
              <b><a name="c0" href="show_bug.cgi@id=26340.html#c0">
                Description</a>:</b>&nbsp;&nbsp;
            </th>
            <td align="left" width="30%">
              <b>Opened:</b> 2017-02-13 17:57
            </td>
          </tr>
        </table>
        


<pre class="bz_comment_text" >This category would keep the original headers for the &quot;To:&quot;, &quot;CC:&quot; and &quot;From:&quot;
fields in the reply template headers.

Thus if a messsage was originally sent to &quot;John Doe &lt;<a href="mailto:johndoe@gmail.com">johndoe@gmail.com</a>&quot;, the
reply header would show &quot;John Doe &lt;<a href="mailto:johndoe@gmail.com">johndoe@gmail.com</a>&quot;. On the other hand, if
the original e-mail was just sent to &quot;&lt;<a href="mailto:johndoe@gmail.com">johndoe@gmail.com</a>&gt;&quot;, the reply header
would show only &quot;<a href="mailto:johndoe@gmail.com">johndoe@gmail.com</a>&quot;.

This would also be useful to people like me who have mail from other accounts
forwarded to their main account, as the reply would thus be generated as coming
from the account towards which is was originally addressed.

It would also show when an e-mail was sent &quot;personally&quot; (name + e-mail address)
or &quot;generally&quot; (e-mail address only.)

Thanks in advance!
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c1" href="show_bug.cgi@id=26340.html#c1">
            #1</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2017-02-14 06:41:11 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >Changed Bug Title. I am still debating what to call the option, &quot;original&quot;
doesn't quite hit it. For the moment my favorite is

%to(initial)%
%cc(initial)%
%bcc(initial)%
%from(initial)%

because it describes the initial (starting point) status of the header as it
comes from the mail server. The other question I have is whether the Advanced
option &quot;Resolve Names from Address Book&quot; should override this, or would this
defeat the purpose?
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c2" href="show_bug.cgi@id=26340.html#c2">
            #2</a> From 
          <a href="mailto:a.fontana&#64;ymail.com">Alessandro</a>
          2017-02-14 07:02:08 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26340.html#c1">comment #1</a>)
<span class="quote">&gt; Changed Bug Title. I am still debating what to call the option, &quot;original&quot;
&gt; doesn't quite hit it. For the moment my favorite is
&gt; 
&gt; %to(initial)%
&gt; %cc(initial)%
&gt; %bcc(initial)%
&gt; %from(initial)%
&gt; 
&gt; because it describes the initial (starting point) status of the header as it
&gt; comes from the mail server. The other question I have is whether the Advanced
&gt; option &quot;Resolve Names from Address Book&quot; should override this, or would this
&gt; defeat the purpose?
&gt; </span >

The bug title change is fine. Calling the option &quot;initial&quot; is also quite
logical.

I don't think that &quot;Resolve Names from Address Book&quot; should override the new
option; as you suggest, this would defeat the whole purpose.

Thanks again for taking this up.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c3" href="show_bug.cgi@id=26340.html#c3">
            #3</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2017-02-14 07:37:40 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="smartTemplate-1.5pre16.xpi" name="attach_8264" title="1.5 prerelease 16">Created an attachment (id=8264)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8264&amp;action=edit" title="1.5 prerelease 16">[details]</a></span>
1.5 prerelease 16

Try this version. It apears Thunderbird will wrap the name portion (everything
before the email address) in double quotes, not sure if this is done during
sending or by the nsIMimeHeaders interface that I am using to read the headers
from the email.

In my test case I was using
%from(initial)%
in order to print out the from header contents, resulting in

&quot;Axel Grude (Test from Indigo)&quot; &lt;<a href="mailto:axel.grude@xxxxxx.com">axel.grude@xxxxxx.com</a>&gt;

I don't know whether all double quotes should be removed or left in, as I do
not know what part of the mail process adds these.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c4" href="show_bug.cgi@id=26340.html#c4">
            #4</a> From 
          <a href="mailto:a.fontana&#64;ymail.com">Alessandro</a>
          2017-02-14 08:40:05 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26340.html#c3">comment #3</a>)
<span class="quote">&gt; Created an <span class=""><a href="smartTemplate-1.5pre16.xpi" name="attach_8264" title="1.5 prerelease 16">attachment (id=8264)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8264&amp;action=edit" title="1.5 prerelease 16">[details]</a></span> [details]
&gt; 1.5 prerelease 16
&gt; 
&gt; Try this version. It apears Thunderbird will wrap the name portion (everything
&gt; before the email address) in double quotes, not sure if this is done during
&gt; sending or by the nsIMimeHeaders interface that I am using to read the headers
&gt; from the email.
&gt; 
&gt; In my test case I was using
&gt; %from(initial)%
&gt; in order to print out the from header contents, resulting in
&gt; 
&gt; &quot;Axel Grude (Test from Indigo)&quot; &lt;<a href="mailto:axel.grude@xxxxxx.com">axel.grude@xxxxxx.com</a>&gt;
&gt; 
&gt; I don't know whether all double quotes should be removed or left in, as I do
&gt; not know what part of the mail process adds these.
&gt; </span >

I've been trying out the new version. When there is no name (just an e-mail
address) in any of the four fields, it works perfectly.

The issue of double (or, at times, single) quotes is remarkably inconsistent. A
bit of quick and dirty testing gives me the impression that they seem to appear
in three cases:

1) Replying to e-mails sent by corporations (this may depend on the mail system
they use, see point 2 below)

2) Replying to e-mails sent via Outlook. I know that Outlook insists on adding
single or double quotes (depending on the version).

3) Replying to e-mails where a non-alphabetic or non-numeric character forms
part of the name (e.g., &quot;@&quot; or &quot;,&quot;).

Would it be possible to add a filter of of the &quot;IF(LEFT(1)=ASC(34) OR
ASC(39),LEFT(1)=&quot;&quot;)&quot;? I don't know how complicated, or indeed, feasible this
would be.

In summary, except for the quotes issue, it's working well. Thanks for diving
into it so quickly. Much appreciated ;-)
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c5" href="show_bug.cgi@id=26340.html#c5">
            #5</a> From 
          <a href="mailto:a.fontana&#64;ymail.com">Alessandro</a>
          2017-02-15 13:47:05 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26340.html#c4">comment #4</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi@id=26340.html#c3">comment #3</a>)
&gt; &gt; Created an <span class=""><a href="smartTemplate-1.5pre16.xpi" name="attach_8264" title="1.5 prerelease 16">attachment (id=8264)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8264&amp;action=edit" title="1.5 prerelease 16">[details]</a></span> [details] [details]
&gt; &gt; 1.5 prerelease 16
&gt; &gt; 
&gt; &gt; Try this version. It apears Thunderbird will wrap the name portion (everything
&gt; &gt; before the email address) in double quotes, not sure if this is done during
&gt; &gt; sending or by the nsIMimeHeaders interface that I am using to read the headers
&gt; &gt; from the email.
&gt; &gt; 
&gt; &gt; In my test case I was using
&gt; &gt; %from(initial)%
&gt; &gt; in order to print out the from header contents, resulting in
&gt; &gt; 
&gt; &gt; &quot;Axel Grude (Test from Indigo)&quot; &lt;<a href="mailto:axel.grude@xxxxxx.com">axel.grude@xxxxxx.com</a>&gt;
&gt; &gt; 
&gt; &gt; I don't know whether all double quotes should be removed or left in, as I do
&gt; &gt; not know what part of the mail process adds these.
&gt; &gt; 
&gt; 
&gt; I've been trying out the new version. When there is no name (just an e-mail
&gt; address) in any of the four fields, it works perfectly.
&gt; 
&gt; The issue of double (or, at times, single) quotes is remarkably inconsistent. A
&gt; bit of quick and dirty testing gives me the impression that they seem to appear
&gt; in three cases:
&gt; 
&gt; 1) Replying to e-mails sent by corporations (this may depend on the mail system
&gt; they use, see point 2 below)
&gt; 
&gt; 2) Replying to e-mails sent via Outlook. I know that Outlook insists on adding
&gt; single or double quotes (depending on the version).
&gt; 
&gt; 3) Replying to e-mails where a non-alphabetic or non-numeric character forms
&gt; part of the name (e.g., &quot;@&quot; or &quot;,&quot;).
&gt; 
&gt; Would it be possible to add a filter of of the &quot;IF(LEFT(1)=ASC(34) OR
&gt; ASC(39),LEFT(1)=&quot;&quot;)&quot;? I don't know how complicated, or indeed, feasible this
&gt; would be.
&gt; 
&gt; In summary, except for the quotes issue, it's working well. Thanks for diving
&gt; into it so quickly. Much appreciated ;-)
&gt; </span >

Very occasionally, the brackets (&quot;&lt;&quot; and &quot;&gt;&quot;) are quoted in the reply header if
there is just an e-mail address (no name) in the original e-mail
</pre>
    </div>
</div>

</form>

<hr>
<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions">
    <div class="label">Actions: </div><ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_bottom"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26340&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>
  </li>

  
    
    
    

  


  
</ul>

  <div class="outro"></div>
</div>

</body>
</html>