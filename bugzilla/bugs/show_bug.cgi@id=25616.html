<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="robots" content="noindex,noarchive,nofollow">
    <title>Bug 25616 &ndash; Broken text formatting inside Template</title>


<link rel="Top" href="https://quickfolders.org/bugzilla/bugs/">

  

  


  
    <link rel="Show" title="Dependency Tree"
          href="https://quickfolders.org/bugzilla/bugs/showdependencytree.cgi?id=25616&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="https://quickfolders.org/bugzilla/bugs/showdependencygraph.cgi?id=25616">


      <link rel="Show" title="Bug Activity"
            href="https://quickfolders.org/bugzilla/bugs/show_activity.cgi?id=25616">
      <link rel="Show" title="Printer-Friendly Version"
            href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?format=multiple&amp;id=25616">


    

    <script type="text/javascript">
  <!--
  
  function initHelp() {}
  // -->
  </script>

    

    
      <link href="https://quickfolders.org/bugzilla/bugs/skins/standard/global.css"
            rel="stylesheet"
            type="text/css">
    <!--[if IE]>
      
      <link href="skins/standard/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    
        <link href="https://quickfolders.org/bugzilla/bugs/skins/standard/global.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <!--[if IE]>
        
        <link href="skins/standard/IE-fixes.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <![endif]-->

    

    

    
        <link href="https://quickfolders.org/bugzilla/bugs/skins/custom/global.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
      
      <link href="skins/custom/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    <link href="https://www.mozdev.org/sharedimages/mozdev-icon.png" rel="icon" type="image/png">
    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozdev" href="https://quickfolders.org/bugzilla/bugs/search_plugin.cgi">
                                          
  </head>



  <body onload=""
        class="www-mozdev-org-bugs bz_bug bz_status_RESOLVED bz_component_General bz_bug_25616">




<div id="header">
<div id="banner">
  </div>

<div id="mozdev-logolet">
<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla@Mozdev &ndash; Bug&nbsp;25616</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Broken text formatting inside Template</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2015-07-09 04:31:09</p>
    </td>
</tr>
</table>
</div>

<ul class="links">
  <li><a href="https://quickfolders.org/bugzilla/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://quickfolders.org/bugzilla/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_top"></form></li>

  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://quickfolders.org/bugzilla/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?id=25616&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>

</div>

<div id="bugzilla-body">

<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<hr>
<script type="text/javascript">
  <!--

  /* Outputs a link to call replyToComment(); used to reduce HTML output */
  function addReplyLink(id) {
      /* XXX this should really be updated to use the DOM Core's
       * createElement, but finding a container isn't trivial.
       */
      document.write('[<a href="#add_comment" onclick="replyToComment(' + 
                     id + ');">reply<' + '/a>]');
  }

  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id) {
      /* pre id="comment_name_N" */
      var text_elem = document.getElementById('comment_text_'+id);
      var text = getText(text_elem);

      /* make sure we split on all newlines -- IE or Moz use \r and \n
       * respectively.
       */
      text = text.split(/\r|\n/);

      var replytext = "";
      for (var i=0; i < text.length; i++) {
          replytext += "> " + text[i] + "\n"; 
      }

      replytext = "(In reply to comment #" + id + ")\n" + replytext + "\n";


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      textarea.value += replytext;

      textarea.focus();
  }

  if (typeof Node == 'undefined') {
      /* MSIE doesn't define Node, so provide a compatibility object */
      window.Node = {
          TEXT_NODE: 3,
          ENTITY_REFERENCE_NODE: 5
      };
  }

  /* Concatenates all text from element's childNodes. This is used
   * instead of innerHTML because we want the actual text (and
   * innerText is non-standard).
   */
  function getText(element) {
      var child, text = "";
      for (var i=0; i < element.childNodes.length; i++) {
          child = element.childNodes[i];
          var type = child.nodeType;
          if (type == Node.TEXT_NODE || type == Node.ENTITY_REFERENCE_NODE) {
              text += child.nodeValue;
          } else {
              /* recurse into nodes of other types */
              text += getText(child);
          }
      }
      return text;
  }


  function updateCommentTagControl(checkbox, form) {
      if (checkbox.checked) {
          form.comment.className='bz_private';
      } else {
          form.comment.className='';
      }
  }

  //-->
  </script>

<form name="changeform" method="post" action="https://quickfolders.org/bugzilla/bugs/process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2015-07-09 04:31:09">
  <input type="hidden" name="longdesclength" value="9">
  <input type="hidden" name="id" value="25616">

  
  <table>
    <tr>
      <td valign="top">
        <fieldset>
          <legend>Details</legend>
          <table>

            
            <tr>
              <td align="right">
                <label for="short_desc" accesskey="s"><b><u>S</u>ummary</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="short_desc" id="short_desc"
              value="Broken text formatting inside Template">Broken text formatting inside Template
  </td>
            </tr>

            <tr>
              <td colspan="3">
                <table>
                  <tr>
                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <b>Bug#</b>:
      </td>
      <td>
        <a href="show_bug.cgi@id=25616.html">25616</a>
      </td>
    </tr>


    <tr>
      <td align="right">
        <label for="product" accesskey="p"><b><u>P</u>roduct</b></label>:
      </td><td>
      <input type="hidden" id="product" name="product" value="smarttemplate4">smarttemplate4
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="component" accesskey="m"><b><a href="https://quickfolders.org/bugzilla/bugs/describecomponents.cgi?product=smarttemplate4">Co<u>m</u>ponent</a></b></label>:
      </td><td>
      <input type="hidden" id="component" name="component" value="General">General
  </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://quickfolders.org/bugzilla/bugs/page.cgi?id=fields.html#status">Status</a></b>:
      </td>
      <td>RESOLVED</td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://quickfolders.org/bugzilla/bugs/page.cgi?id=fields.html#resolution">Resolution</a></b>:
      </td>
      <td>WORKSFORME
      </td>
    </tr>
  </table></td>

                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <label for="rep_platform" accesskey="h"><b><u>H</u>ardware</b></label>:
      </td><td>
      <input type="hidden" id="rep_platform" name="rep_platform" value="PC">PC
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="op_sys" accesskey="o"><b><u>O</u>S</b></label>:
      </td><td>
      <input type="hidden" id="op_sys" name="op_sys" value="Windows 7">Windows 7
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="version"><b>Version</b></label>:
      </td><td>
      <input type="hidden" id="version" name="version" value="unspecified">unspecified
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="priority" accesskey="i"><b><a href="https://quickfolders.org/bugzilla/bugs/page.cgi?id=fields.html#priority">Pr<u>i</u>ority</a></b></label>:
      </td><td>
      <input type="hidden" id="priority" name="priority" value="P2">P2
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="bug_severity"><b><a href="https://quickfolders.org/bugzilla/bugs/page.cgi?id=fields.html#bug_severity">Severity</a></b></label>:
      </td><td>
      <input type="hidden" id="bug_severity" name="bug_severity" value="normal">normal
  </td>
    </tr>

      <tr>
        <td align="right">
          <label for="target_milestone"><b>
            Target Milestone</b></label>:
        </td><td>
      <input type="hidden" id="target_milestone" name="target_milestone" value="---">---
  </td>
      </tr>
  </table></td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td colspan="3"><hr size="1"></td>
            </tr>

            

            <tr>
              <td align="right">
                <label for="bug_file_loc" accesskey="u"><b>
                    <u>U</u>RL</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="bug_file_loc" id="bug_file_loc"
              value="">
  </td>
            </tr>

              <tr>
                <td align="right">
                  <label for="status_whiteboard" accesskey="w"><b><u>W</u>hiteboard</b></label>:
                </td><td colspan="2">
       <input type="hidden" name="status_whiteboard" id="status_whiteboard"
              value="">
  </td>
              </tr>

              <tr>
                <td align="right">
                  <label for="keywords" accesskey="k">
                    <b><a href="https://quickfolders.org/bugzilla/bugs/describekeywords.cgi"><u>K</u>eywords</a></b></label>:
                </td><td colspan="2">
       <input type="hidden" name="keywords" id="keywords"
              value="">
  </td>
              </tr>

            


            

            <tr><th align="right">
    <label for="dependson">Depends&nbsp;on</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="dependson" name="dependson"
             value="">
  </td>
            </tr>

            <tr><th align="right">
    <label for="blocked" accesskey="b"><u>B</u>locks</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="blocked" name="blocked"
             value="">
  </td>
            </tr>

            <tr>
              <th>&nbsp;</th>

              <td colspan="2">
                <a href="https://quickfolders.org/bugzilla/bugs/showdependencytree.cgi?id=25616&amp;hide_resolved=1">Show
                   dependency tree</a>

                  - <a href="https://quickfolders.org/bugzilla/bugs/showdependencygraph.cgi?id=25616">Show
                       dependency graph</a>
              </td>
            </tr>
          </table>
        </fieldset>
      </td>

      
      <script type="text/javascript">
        <!--
        var v = document.body.offsetHeight;
        //-->
      </script>

      <td valign="top">
        
        <fieldset>
          <legend>People</legend><table cellpadding="1" cellspacing="1">
    <tr>
      <td align="right">
        <b>Reporter</b>:
      </td>
      <td>
        <a href="mailto:mateusz.plociennik&#64;gmail.com">Mateusz Płóciennik &lt;mateusz.plociennik&#64;gmail.com&gt;</a>
      </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://quickfolders.org/bugzilla/bugs/page.cgi?id=fields.html#assigned_to">Assigned&nbsp;To</a></b>:
      </td>
      <td>
        <a href="mailto:axel.grude&#64;gmail.com">Axel Grude &lt;axel.grude&#64;gmail.com&gt;</a>
      </td>
    </tr>



    <tr>
        <td colspan="2"><input type="hidden" name="cc" value=""></td>
    </tr>
  </table>
        </fieldset>

        
      </td>
    </tr>
  </table>



<script type="text/javascript">
  <!--
  function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var rows = table.getElementsByTagName("tr");
    var originalHeight = table.offsetHeight; // Store current height for scrolling

    var toggle;
    if (link.innerHTML == "Show Obsolete") {
      toggle = ""; // This should be 'table-row', but IE 6 doesn't understand it.
      link.innerHTML = "Hide Obsolete";
    }
    else {
      toggle = "none";
      link.innerHTML = "Show Obsolete";
    }

    for (var i = 0; i < rows.length; i++) {
      if (rows[i].className.match('bz_tr_obsolete'))
        rows[i].style.display = toggle;
    }

    var newHeight = table.offsetHeight;
    window.scrollBy(0, newHeight - originalHeight);

    return false;
  }
  //-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr>
    <th colspan="3" align="left">
      <a name="a0" id="a0">Attachments</a>
    </th>
  </tr>


      <tr class="
                 ">
        <td valign="top">
            <a name="a1" href="smart_template_4.png"
               title="View the content of the attachment">
          <b>Broken formatting example</b></a>

          <span class="bz_attach_extra_info">
              (506 bytes,
                image/png)

            <br>
            <a href="show_bug.cgi@id=25616.html#attach_7714"
               title="Go to the comment associated with the attachment">2013-10-30 04:44</a>,

            <a href="mailto:mateusz.plociennik&#64;gmail.com"
               title="Write an email to the creator of the attachment">Mateusz Płóciennik
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7714&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 ">
        <td valign="top">
            <a name="a2" href="oooo_with_st4.eml.html"
               title="View the content of the attachment">
          <b>Mail with smartTemplate4</b></a>

          <span class="bz_attach_extra_info">
              (3.62 KB,
                text/html)

            <br>
            <a href="show_bug.cgi@id=25616.html#attach_7715"
               title="Go to the comment associated with the attachment">2013-10-31 04:04</a>,

            <a href="mailto:mateusz.plociennik&#64;gmail.com"
               title="Write an email to the creator of the attachment">Mateusz Płóciennik
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7715&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 ">
        <td valign="top">
            <a name="a3" href="oooo_without.eml.html"
               title="View the content of the attachment">
          <b>Mail without st4</b></a>

          <span class="bz_attach_extra_info">
              (3.25 KB,
                text/html)

            <br>
            <a href="show_bug.cgi@id=25616.html#attach_7716"
               title="Go to the comment associated with the attachment">2013-10-31 04:05</a>,

            <a href="mailto:mateusz.plociennik&#64;gmail.com"
               title="Write an email to the creator of the attachment">Mateusz Płóciennik
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7716&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
        </span>
      <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?bugid=25616&amp;action=enter">Add an attachment</a>
      (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>




  <br>
  <table cellpadding="1" cellspacing="1">
    <tr>
      <td>
          <fieldset>
            <legend>Note</legend>
            <p>
              You need to
              <a href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?id=25616&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </p>
          </fieldset>
      </td>

      <td valign="top">
        <fieldset>
          <legend>Related actions</legend>
          <ul>
            <li><a href="https://quickfolders.org/bugzilla/bugs/show_activity.cgi?id=25616">View Bug Activity</a></li>
            <li><a href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?format=multiple&amp;id=25616">Format For Printing</a></li>
            <li><a href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?ctype=xml&amp;id=25616">XML</a></li>
            <li><a href="https://quickfolders.org/bugzilla/bugs/enter_bug.cgi?cloned_bug_id=25616">Clone This Bug</a></li>
          </ul>


          
        </fieldset>
      </td>
    </tr>
  </table>
  <br>





<hr>

<div id="comments"><script type="text/javascript">
  <!--
  function updateCommentPrivacy(checkbox, id) {
    var comment_elem = document.getElementById('comment_text_'+id).parentNode;
    if (checkbox.checked) {
      if (!comment_elem.className.match('bz_private')) {
        comment_elem.className = comment_elem.className.concat(' bz_private');
      }
    }
    else {
      comment_elem.className =
        comment_elem.className.replace(/(\s*|^)bz_private(\s*|$)/, '$2');
    }
  }
  //-->
  </script>








<div class="bz_comment">
        <table>
          <tr>
            <th align="left">
              <b><a name="c0" href="show_bug.cgi@id=25616.html#c0">
                Description</a>:</b>&nbsp;&nbsp;
            </th>
            <td align="left" width="30%">
              <b>Opened:</b> 2013-10-30 04:44
            </td>
          </tr>
        </table>
        


<pre class="bz_comment_text" ><span class=""><a href="smart_template_4.png" name="attach_7714" title="Broken formatting example">Created an attachment (id=7714)</a> <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7714&amp;action=edit" title="Broken formatting example">[details]</a></span>
Broken formatting example

Even Template is empty (only Quote Header exchanged), space and div block is
added:
&lt;div id=&quot;smartTemplate4-template&quot;&gt;&lt;font face=&quot;Arial&quot;&gt; &lt;/font&gt;&lt;/div&gt;
&lt;br&gt;
&lt;div class=&quot;moz-signature&quot;&gt;
(...)

It breaks text formatting of the e-mail (different font in div, than in mail
body). I have Arial selected as default font.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c1" href="show_bug.cgi@id=25616.html#c1">
            #1</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2013-10-31 01:50:46 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >An empty &lt;div&gt; with a different font should not break your mail. check the body
tag. Are any tags unclosed? Best thing is to save the complete mail as html and
attach to the bug. (*you can strip the headers for privacy)
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c2" href="show_bug.cgi@id=25616.html#c2">
            #2</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2013-10-31 01:52:27 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >Also, you should try installing Stationery to give you the HTML source tab to
your composer to make it easier to fix problems at source. E.g. you could
remove the &lt;font face=&quot;Arial&quot;&gt; &lt;/font&gt; tags to see whether that fixes it.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c3" href="show_bug.cgi@id=25616.html#c3">
            #3</a> From 
          <a href="mailto:mateusz.plociennik&#64;gmail.com">Mateusz Płóciennik</a>
          2013-10-31 04:04:27 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="oooo_with_st4.eml.html" name="attach_7715" title="Mail with smartTemplate4">Created an attachment (id=7715)</a> <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7715&amp;action=edit" title="Mail with smartTemplate4">[details]</a></span>
Mail with smartTemplate4
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c4" href="show_bug.cgi@id=25616.html#c4">
            #4</a> From 
          <a href="mailto:mateusz.plociennik&#64;gmail.com">Mateusz Płóciennik</a>
          2013-10-31 04:05:18 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="oooo_without.eml.html" name="attach_7716" title="Mail without st4">Created an attachment (id=7716)</a> <a href="https://quickfolders.org/bugzilla/bugs/attachment.cgi?id=7716&amp;action=edit" title="Mail without st4">[details]</a></span>
Mail without st4
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c5" href="show_bug.cgi@id=25616.html#c5">
            #5</a> From 
          <a href="mailto:mateusz.plociennik&#64;gmail.com">Mateusz Płóciennik</a>
          2013-10-31 04:26:33 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >As you can see using &lt;div id=&quot;smartTemplate4-template&quot;&gt; introduces new line at
the end of it. When I disabled the add-on, there is first line to write the
mail in and second line with signature delimiter &quot;-- &quot;. With smart template I
receive first line with space(!?) (where formatting is correct) and second
empty line (where formatting is disabled - out of &lt;font face=&quot;Arial&quot;&gt;&lt;/face&gt;).
This confuses the user. 

My suggestion is to use &lt;br&gt; instead of space:
&lt;div id=&quot;smartTemplate4-template&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;br&gt;
  &lt;/font&gt;&lt;/div&gt;
&lt;div class=&quot;moz-signature&quot;&gt;
(...)
So that way &lt;font&gt; marker won't disappear and user won't be confused.

Another question is, why &quot;-- &quot; delimiter disappears and why there is another
&lt;br&gt; added after the signature?
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c6" href="show_bug.cgi@id=25616.html#c6">
            #6</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2013-10-31 05:29:22 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=25616.html#c5">comment #5</a>)
<span class="quote">&gt; As you can see using &lt;div id=&quot;smartTemplate4-template&quot;&gt; introduces new line at
&gt; the end of it. When I disabled the add-on, there is first line to write the
&gt; mail in and second line with signature delimiter &quot;-- &quot;. With smart template I
&gt; receive first line with space(!?) (where formatting is correct) and second
&gt; empty line (where formatting is disabled - out of &lt;font face=&quot;Arial&quot;&gt;&lt;/face&gt;).
&gt; This confuses the user. 
&gt; 
&gt; My suggestion is to use &lt;br&gt; instead of space:
&gt; &lt;div id=&quot;smartTemplate4-template&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;br&gt;
&gt;   &lt;/font&gt;&lt;/div&gt;</span >
where does the font tag come from? We certainly do not inject a font tag into
the template unless you have that as part of your template...


<span class="quote">&gt; &lt;div class=&quot;moz-signature&quot;&gt;
&gt; (...)
&gt; So that way &lt;font&gt; marker won't disappear and user won't be confused.
&gt; </span >

<span class="quote">&gt; Another question is, why &quot;-- &quot; delimiter disappears</span >
This was always the behavior of st4 (if you want to ask why, you must ask the
original author) and I did not want to change it to confuse 14,500 existing
users - there is an option in Advanced &gt; Global Settings to add it again - it
is even separate for HTML and plain text mails.

<span class="quote">&gt; and why there is another &lt;br&gt; added after the signature?</span >
I have no idea. But that shouldn't be discusses in this bug - contact me via
mail or raise another bug. The &lt;br&gt; issues are not for the faint hearted as
there are many different permutations of signature placements / quoting / html
mail / plain text so it is an absolute nightmare to get right without ticking
of hundreds of other users.

<span class="quote">&gt; </span >

just to recap:

the first line: &lt;font face=&quot;Arial&quot;&gt;&amp;nbsp;oooo&lt;/font&gt;

is that font tag from you? And is that the way you want the whole mail to look.

or the second one (which is inserted after the template)?

Where does the cursor appear? (To make sure of the cursor being within the
template, you could use the %cursor% variable)
Also, your screenshot is not too helpful as you chose only the character 'O'
which doesn't tell much about which font is actually displayed. A better choice
might be the sentence

&quot;The fox jumped over the lazy dog&quot;

as it contains letters from the whole alphabet.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c7" href="show_bug.cgi@id=25616.html#c7">
            #7</a> From 
          <a href="mailto:mateusz.plociennik&#64;gmail.com">Mateusz Płóciennik</a>
          2013-10-31 07:36:13 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >The 1st font tag comes from Thunderbird 24.1.0 &gt; Tools &gt; Options &gt; Composition
<span class="quote">&gt; General &gt; HTML &gt; Font: Arial. It should be the default one for whole e-mail</span >
body. 2nd tag comes from my signature - you can see it is after &lt;div
class=&quot;moz-signature&quot;&gt; tag.
Cursor is not visible, rather the &amp;nbsp; is highlighted by editor.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c8" href="show_bug.cgi@id=25616.html#c8">
            #8</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2013-10-31 08:32:27 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=25616.html#c7">comment #7</a>)
<span class="quote">&gt; The 1st font tag comes from Thunderbird 24.1.0 &gt; Tools &gt; Options &gt; Composition
&gt; &gt; General &gt; HTML &gt; Font: Arial. It should be the default one for whole e-mail
&gt; body. 2nd tag comes from my signature - you can see it is after &lt;div
&gt; class=&quot;moz-signature&quot;&gt; tag.
&gt; Cursor is not visible, rather the &amp;nbsp; is highlighted by editor.
&gt; </span >

You can disable that space with the following about:config setting:

 extensions.smartTemplate4.cursor.insertSpace

to &quot;false&quot;. 

To do this,
OPen Tools &gt; Options, then click the Advanced Tab, underneath select General
Tab;
click on [Config Editor...]

In the search box, enter extensions.smartTemplate4.cursor

double click the setting to set it to false.
</pre>
    </div>
</div>

</form>

<hr>
<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions">
    <div class="label">Actions: </div><ul class="links">
  <li><a href="https://quickfolders.org/bugzilla/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://quickfolders.org/bugzilla/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_bottom"></form></li>

  <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://quickfolders.org/bugzilla/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://quickfolders.org/bugzilla/bugs/show_bug.cgi?id=25616&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>
  </li>

  
    
    
    

  


  
</ul>

  <div class="outro"></div>
</div>

</body>
</html>