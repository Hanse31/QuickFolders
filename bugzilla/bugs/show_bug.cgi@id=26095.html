<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="robots" content="noindex,noarchive,nofollow">
    <title>Bug 26095 &ndash; Renaming or Moving Folder causes orphaned Tabs on Subfolders</title>


<link rel="Top" href="https://www.mozdev.org/bugs/">

  

  


  
    <link rel="Show" title="Dependency Tree"
          href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26095&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26095">


      <link rel="Show" title="Bug Activity"
            href="https://www.mozdev.org/bugs/show_activity.cgi?id=26095">
      <link rel="Show" title="Printer-Friendly Version"
            href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26095">


    

    <script type="text/javascript">
  <!--
  
  function initHelp() {}
  // -->
  </script>

    

    
      <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
            rel="stylesheet"
            type="text/css">
    <!--[if IE]>
      
      <link href="skins/standard/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    
        <link href="https://www.mozdev.org/bugs/skins/standard/global.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <!--[if IE]>
        
        <link href="skins/standard/IE-fixes.css"
              rel="stylesheet"
              title="Classic"
              type="text/css">
      <![endif]-->

    

    

    
        <link href="https://www.mozdev.org/bugs/skins/custom/global.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
      
      <link href="skins/custom/IE-fixes.css"
            rel="stylesheet"
            type="text/css">
    <![endif]-->

    <link href="https://www.mozdev.org/sharedimages/mozdev-icon.png" rel="icon" type="image/png">
    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozdev" href="https://www.mozdev.org/bugs/search_plugin.cgi">
                                          
  </head>



  <body onload=""
        class="www-mozdev-org-bugs bz_bug bz_status_RESOLVED bz_component_General bz_bug_26095">




<div id="header">
<div id="banner">
  </div>

<div id="mozdev-logolet">
<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla@Mozdev &ndash; Bug&nbsp;26095</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Renaming or Moving Folder causes orphaned Tabs on Subfolders</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2015-10-31 03:45:57</p>
    </td>
</tr>
</table>
</div>

<ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_top"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26095&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>

</div>

<div id="bugzilla-body">

<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<hr>
<script type="text/javascript">
  <!--

  /* Outputs a link to call replyToComment(); used to reduce HTML output */
  function addReplyLink(id) {
      /* XXX this should really be updated to use the DOM Core's
       * createElement, but finding a container isn't trivial.
       */
      document.write('[<a href="#add_comment" onclick="replyToComment(' + 
                     id + ');">reply<' + '/a>]');
  }

  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id) {
      /* pre id="comment_name_N" */
      var text_elem = document.getElementById('comment_text_'+id);
      var text = getText(text_elem);

      /* make sure we split on all newlines -- IE or Moz use \r and \n
       * respectively.
       */
      text = text.split(/\r|\n/);

      var replytext = "";
      for (var i=0; i < text.length; i++) {
          replytext += "> " + text[i] + "\n"; 
      }

      replytext = "(In reply to comment #" + id + ")\n" + replytext + "\n";


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      textarea.value += replytext;

      textarea.focus();
  }

  if (typeof Node == 'undefined') {
      /* MSIE doesn't define Node, so provide a compatibility object */
      window.Node = {
          TEXT_NODE: 3,
          ENTITY_REFERENCE_NODE: 5
      };
  }

  /* Concatenates all text from element's childNodes. This is used
   * instead of innerHTML because we want the actual text (and
   * innerText is non-standard).
   */
  function getText(element) {
      var child, text = "";
      for (var i=0; i < element.childNodes.length; i++) {
          child = element.childNodes[i];
          var type = child.nodeType;
          if (type == Node.TEXT_NODE || type == Node.ENTITY_REFERENCE_NODE) {
              text += child.nodeValue;
          } else {
              /* recurse into nodes of other types */
              text += getText(child);
          }
      }
      return text;
  }


  function updateCommentTagControl(checkbox, form) {
      if (checkbox.checked) {
          form.comment.className='bz_private';
      } else {
          form.comment.className='';
      }
  }

  //-->
  </script>

<form name="changeform" method="post" action="https://www.mozdev.org/bugs/process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2015-10-31 03:45:57">
  <input type="hidden" name="longdesclength" value="11">
  <input type="hidden" name="id" value="26095">

  
  <table>
    <tr>
      <td valign="top">
        <fieldset>
          <legend>Details</legend>
          <table>

            
            <tr>
              <td align="right">
                <label for="short_desc" accesskey="s"><b><u>S</u>ummary</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="short_desc" id="short_desc"
              value="Renaming or Moving Folder causes orphaned Tabs on Subfolders">Renaming or Moving Folder causes orphaned Tabs on Subfolders
  </td>
            </tr>

            <tr>
              <td colspan="3">
                <table>
                  <tr>
                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <b>Bug#</b>:
      </td>
      <td>
        <a href="show_bug.cgi@id=26095.html">26095</a>
      </td>
    </tr>


    <tr>
      <td align="right">
        <label for="product" accesskey="p"><b><u>P</u>roduct</b></label>:
      </td><td>
      <input type="hidden" id="product" name="product" value="QuickFolders">QuickFolders
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="component" accesskey="m"><b><a href="https://www.mozdev.org/bugs/describecomponents.cgi?product=QuickFolders">Co<u>m</u>ponent</a></b></label>:
      </td><td>
      <input type="hidden" id="component" name="component" value="General">General
  </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#status">Status</a></b>:
      </td>
      <td>RESOLVED</td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#resolution">Resolution</a></b>:
      </td>
      <td>FIXED
      </td>
    </tr>
  </table></td>

                    
                    <td valign="top"><table cellspacing="1" cellpadding="1">
    <tr>
      <td align="right">
        <label for="rep_platform" accesskey="h"><b><u>H</u>ardware</b></label>:
      </td><td>
      <input type="hidden" id="rep_platform" name="rep_platform" value="PC">PC
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="op_sys" accesskey="o"><b><u>O</u>S</b></label>:
      </td><td>
      <input type="hidden" id="op_sys" name="op_sys" value="Windows NT">Windows NT
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="version"><b>Version</b></label>:
      </td><td>
      <input type="hidden" id="version" name="version" value="unspecified">unspecified
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="priority" accesskey="i"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#priority">Pr<u>i</u>ority</a></b></label>:
      </td><td>
      <input type="hidden" id="priority" name="priority" value="P2">P2
  </td>
    </tr>

    <tr>
      <td align="right">
        <label for="bug_severity"><b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#bug_severity">Severity</a></b></label>:
      </td><td>
      <input type="hidden" id="bug_severity" name="bug_severity" value="major">major
  </td>
    </tr>

      <tr>
        <td align="right">
          <label for="target_milestone"><b>
            Target Milestone</b></label>:
        </td><td>
      <input type="hidden" id="target_milestone" name="target_milestone" value="---">---
  </td>
      </tr>
  </table></td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td colspan="3"><hr size="1"></td>
            </tr>

            

            <tr>
              <td align="right">
                <label for="bug_file_loc" accesskey="u"><b>
                    <u>U</u>RL</b></label>:
              </td><td colspan="2">
       <input type="hidden" name="bug_file_loc" id="bug_file_loc"
              value="">
  </td>
            </tr>

              <tr>
                <td align="right">
                  <label for="status_whiteboard" accesskey="w"><b><u>W</u>hiteboard</b></label>:
                </td><td colspan="2">
       <input type="hidden" name="status_whiteboard" id="status_whiteboard"
              value="">
  </td>
              </tr>

              <tr>
                <td align="right">
                  <label for="keywords" accesskey="k">
                    <b><a href="https://www.mozdev.org/bugs/describekeywords.cgi"><u>K</u>eywords</a></b></label>:
                </td><td colspan="2">
       <input type="hidden" name="keywords" id="keywords"
              value="">
  </td>
              </tr>

            


            

            <tr><th align="right">
    <label for="dependson">Depends&nbsp;on</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="dependson" name="dependson"
             value="">
  </td>
            </tr>

            <tr><th align="right">
    <label for="blocked" accesskey="b"><u>B</u>locks</label>:
  </th>
  <td>
  </td>
  <td>
      <input type="hidden" id="blocked" name="blocked"
             value="">
  </td>
            </tr>

            <tr>
              <th>&nbsp;</th>

              <td colspan="2">
                <a href="https://www.mozdev.org/bugs/showdependencytree.cgi?id=26095&amp;hide_resolved=1">Show
                   dependency tree</a>

                  - <a href="https://www.mozdev.org/bugs/showdependencygraph.cgi?id=26095">Show
                       dependency graph</a>
              </td>
            </tr>
          </table>
        </fieldset>
      </td>

      
      <script type="text/javascript">
        <!--
        var v = document.body.offsetHeight;
        //-->
      </script>

      <td valign="top">
        
        <fieldset>
          <legend>People</legend><table cellpadding="1" cellspacing="1">
    <tr>
      <td align="right">
        <b>Reporter</b>:
      </td>
      <td>
        <a href="mailto:yango.pohl&#64;zahnunfall.de">Yango Pohl &lt;yango.pohl&#64;zahnunfall.de&gt;</a>
      </td>
    </tr>

    <tr>
      <td align="right">
        <b><a href="https://www.mozdev.org/bugs/page.cgi?id=fields.html#assigned_to">Assigned&nbsp;To</a></b>:
      </td>
      <td>
        <a href="mailto:axel.grude&#64;gmail.com">Axel Grude &lt;axel.grude&#64;gmail.com&gt;</a>
      </td>
    </tr>



    <tr>
        <td align="right" valign="top">
          <label for="cc"><b>CC</b></label>:
        </td>
        <td valign="top">
          <select id="cc" name="cc" multiple="multiple" size="5">
            <option value="alexandermalfait&#64;gmail.com">alexandermalfait&#64;gmail.com</option>
          </select>
        </td>
    </tr>
  </table>
        </fieldset>

        
      </td>
    </tr>
  </table>



<script type="text/javascript">
  <!--
  function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var rows = table.getElementsByTagName("tr");
    var originalHeight = table.offsetHeight; // Store current height for scrolling

    var toggle;
    if (link.innerHTML == "Show Obsolete") {
      toggle = ""; // This should be 'table-row', but IE 6 doesn't understand it.
      link.innerHTML = "Hide Obsolete";
    }
    else {
      toggle = "none";
      link.innerHTML = "Show Obsolete";
    }

    for (var i = 0; i < rows.length; i++) {
      if (rows[i].className.match('bz_tr_obsolete'))
        rows[i].style.display = toggle;
    }

    var newHeight = table.offsetHeight;
    window.scrollBy(0, newHeight - originalHeight);

    return false;
  }
  //-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr>
    <th colspan="3" align="left">
      <a name="a0" id="a0">Attachments</a>
    </th>
  </tr>


      <tr class="
                 bz_tr_obsolete">
        <td valign="top">
            <a name="a1" href="QuickFolders-tb-pb-sm-4.2.2pre17.xpi"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">4.2.2 prerelease 17</span></b></a>

          <span class="bz_attach_extra_info">
              (660.39 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26095.html#attach_8112"
               title="Go to the comment associated with the attachment">2015-10-19 06:10</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8112&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 bz_tr_obsolete">
        <td valign="top">
            <a name="a2" href="QuickFolders-tb-pb-sm-4.2.2pre20.xpi"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">4.2.2 prerelease 20</span></b></a>

          <span class="bz_attach_extra_info">
              (660.53 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26095.html#attach_8113"
               title="Go to the comment associated with the attachment">2015-10-19 11:14</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8113&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 bz_tr_obsolete">
        <td valign="top">
            <a name="a3" href="QuickFolders-tb-pb-sm-4.2.2pre25.xpi"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">4.2.2 prerelease 25</span></b></a>

          <span class="bz_attach_extra_info">
              (660.93 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26095.html#attach_8114"
               title="Go to the comment associated with the attachment">2015-10-19 12:30</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8114&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 bz_tr_obsolete">
        <td valign="top">
            <a name="a4" href="QuickFolders-tb-pb-sm-4.2.2pre28.xpi"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">4.2.2 prerelease 28</span></b></a>

          <span class="bz_attach_extra_info">
              (660.98 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26095.html#attach_8115"
               title="Go to the comment associated with the attachment">2015-10-19 12:56</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8115&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr class="
                 ">
        <td valign="top">
            <a name="a5" href="QuickFolders-tb-pb-sm-4.2.2pre34.xpi"
               title="View the content of the attachment">
          <b>4.2.2 prerelease 34</b></a>

          <span class="bz_attach_extra_info">
              (661.07 KB,
                application/x-xpinstall)

            <br>
            <a href="show_bug.cgi@id=26095.html#attach_8116"
               title="Go to the comment associated with the attachment">2015-10-20 04:17</a>,

            <a href="mailto:axel.grude&#64;gmail.com"
               title="Write an email to the creator of the attachment">Axel Grude
            </a>
          </span>
        </td>

          <td class="bz_attach_flags" valign="top">
              <i>no flags</i>
          </td>

        <td valign="top">
          <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8116&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a href="show_bug.cgi@id=26095.html#a0" onClick="return toggle_display(this);">Hide Obsolete</a> (4)
        </span>
      <a href="https://www.mozdev.org/bugs/attachment.cgi?bugid=26095&amp;action=enter">Add an attachment</a>
      (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>




  <br>
  <table cellpadding="1" cellspacing="1">
    <tr>
      <td>
          <fieldset>
            <legend>Note</legend>
            <p>
              You need to
              <a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26095&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </p>
          </fieldset>
      </td>

      <td valign="top">
        <fieldset>
          <legend>Related actions</legend>
          <ul>
            <li><a href="https://www.mozdev.org/bugs/show_activity.cgi?id=26095">View Bug Activity</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?format=multiple&amp;id=26095">Format For Printing</a></li>
            <li><a href="https://www.mozdev.org/bugs/show_bug.cgi?ctype=xml&amp;id=26095">XML</a></li>
            <li><a href="https://www.mozdev.org/bugs/enter_bug.cgi?cloned_bug_id=26095">Clone This Bug</a></li>
          </ul>


          
        </fieldset>
      </td>
    </tr>
  </table>
  <br>





<hr>

<div id="comments"><script type="text/javascript">
  <!--
  function updateCommentPrivacy(checkbox, id) {
    var comment_elem = document.getElementById('comment_text_'+id).parentNode;
    if (checkbox.checked) {
      if (!comment_elem.className.match('bz_private')) {
        comment_elem.className = comment_elem.className.concat(' bz_private');
      }
    }
    else {
      comment_elem.className =
        comment_elem.className.replace(/(\s*|^)bz_private(\s*|$)/, '$2');
    }
  }
  //-->
  </script>








<div class="bz_comment">
        <table>
          <tr>
            <th align="left">
              <b><a name="c0" href="show_bug.cgi@id=26095.html#c0">
                Description</a>:</b>&nbsp;&nbsp;
            </th>
            <td align="left" width="30%">
              <b>Opened:</b> 2015-10-17 19:05
            </td>
          </tr>
        </table>
        


<pre class="bz_comment_text" >Hi, Axel,
renaming a folder causes the loss of the link between qf-tabs to subfolders of
that renamed folder - whether using the tree or the qf-commands. (&quot;Dies ist ein
Tab der auf ein ungültiges Verzeichnis verweist&quot;).
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c1" href="show_bug.cgi@id=26095.html#c1">
            #1</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-18 03:35:45 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >I think that is a good catch - I may have looked at this before but it is not
impossible to fix as I have a global folder listener in place. It may only look
at the tabs themselves (and not the children) for fixing the URLs, so
definitely a P2 with major severity. I will see what I can do on the quick to
fix this.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c2" href="show_bug.cgi@id=26095.html#c2">
            #2</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-18 04:23:37 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26095.html#c1">comment #1</a>)
<span class="quote">&gt; I think that is a good catch - I may have looked at this before but it is not
&gt; impossible to fix as I have a global folder listener in place. It may only look
&gt; at the tabs themselves (and not the children) for fixing the URLs, so
&gt; definitely a P2 with major severity. I will see what I can do on the quick to
&gt; fix this.
&gt; </span >

I found one additional problem - once prompted for deleting the tab, if the
user accepts it, the tab is not immediately removed from the QuickFolders
toolbar, which leads to even more confusion, so I am going to address this as
well as part of this bugfix.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c3" href="show_bug.cgi@id=26095.html#c3">
            #3</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-18 04:39:11 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi@id=26095.html#c2">comment #2</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi@id=26095.html#c1">comment #1</a>)
&gt; &gt; I think that is a good catch - I may have looked at this before but it is not
&gt; &gt; impossible to fix as I have a global folder listener in place. It may only look
&gt; &gt; at the tabs themselves (and not the children) for fixing the URLs, so
&gt; &gt; definitely a P2 with major severity. I will see what I can do on the quick to
&gt; &gt; fix this.
&gt; &gt; 
&gt; 
&gt; I found one additional problem - once prompted for deleting the tab, if the
&gt; user accepts it, the tab is not immediately removed from the QuickFolders
&gt; toolbar, which leads to even more confusion, so I am going to address this as
&gt; well as part of this bugfix.
&gt; </span >
I am encountering another problem on my test account (on Tb 42 beta 2) -
apparently the IMAP synchronization with gmail doesn't update the folder tree
immediately if I rename a folder from the folder tree - I have to restart
Thunderbird. This is not good as I am not getting the rename event during the
session. It might be caused by my slow internet connection or the fact that the
folder tree is under the [Gmail] folder. In any case that's make testing the
fix (on IMAP) difficult. I will try to test it on POP3 first...
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c4" href="show_bug.cgi@id=26095.html#c4">
            #4</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-19 06:10:32 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="bz_obsolete"><a href="QuickFolders-tb-pb-sm-4.2.2pre17.xpi" name="attach_8112" title="4.2.2 prerelease 17">Created an attachment (id=8112)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8112&amp;action=edit" title="4.2.2 prerelease 17">[details]</a></span>
4.2.2 prerelease 17

This version addresses the bug in Thunderbird (not tested in Postbox /
SeaMonkey which might be different). I have replaced the renameFolders function
with an identical one within QuickFolders which takes a note of the URI and new
folder name. There is still a problem (I suspect it is a bug in Thunderbird /
gmail) in that the rename does not reflect immediately in the folder tree for
[Gmail] subfolders. The only valid way I found to update the tree was
restarting Thunderbird

This means that although the fixed version does correct tabs pointing to
subfolders correctly you can still get the (now incorrect) error message on
IMAP saying &quot;this tab points to an incorrect folder location&quot; even thought the
folder location exists on the remote server (and it will be correct after
Thunderbird restarts). Not to sure how to address this yet as it appears to be
an IMAP / Sync problem. It might be best to disable the validation routine on
these tabs after they were affected by the rename (even though the tree
navigation will be broken until the forced re-sync)
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c5" href="show_bug.cgi@id=26095.html#c5">
            #5</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-19 11:14:41 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="bz_obsolete"><a href="QuickFolders-tb-pb-sm-4.2.2pre20.xpi" name="attach_8113" title="4.2.2 prerelease 20">Created an attachment (id=8113)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8113&amp;action=edit" title="4.2.2 prerelease 20">[details]</a></span>
4.2.2 prerelease 20

So this version deals with the problem of the Thunderbird disconnect to the
IMAP server by flagging all Tabs with modified URIs so that they do not trigger
the path validation routine until the next restart. 

They will also then not try to open the (invalid) folder unless it exists
avoiding further pollution of the error log.

Testing in IMAP: you can still select the subfolders but they do not open in
the tree if the tree is &quot;disconnected&quot; from the folders on the IMAP server.

Testing on Local Folders: subfolders of renamed folder are working without
problems.

Testing on POP: subfolders of renamed folder are working without problems.

Customized Icons: may stop working during session but should show on next
reload.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c6" href="show_bug.cgi@id=26095.html#c6">
            #6</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-19 12:30:48 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="bz_obsolete"><a href="QuickFolders-tb-pb-sm-4.2.2pre25.xpi" name="attach_8114" title="4.2.2 prerelease 25">Created an attachment (id=8114)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8114&amp;action=edit" title="4.2.2 prerelease 25">[details]</a></span>
4.2.2 prerelease 25

This one works in Postbox as well.

Also if you use special characters (such as ' ' Space) they will be less likely
to break the URI. Apparently there is some encoding going on for generating a
safe filename (this is done deep in the C code, I am using the somehwat mundate
encodeURIComponent() function for this so it might not be 100% correct when
using arcane characters such as Kanji or eastern european languages. To be
tested...
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c7" href="show_bug.cgi@id=26095.html#c7">
            #7</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-19 12:56:20 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class="bz_obsolete"><a href="QuickFolders-tb-pb-sm-4.2.2pre28.xpi" name="attach_8115" title="4.2.2 prerelease 28">Created an attachment (id=8115)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8115&amp;action=edit" title="4.2.2 prerelease 28">[details]</a></span>
4.2.2 prerelease 28

SeaMonkey compatible version...

tested in Postbox 4.0.6 + SeaMonkey 2.38
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c8" href="show_bug.cgi@id=26095.html#c8">
            #8</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-20 01:28:14 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >FYI:

<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1120361">https://bugzilla.mozilla.org/show_bug.cgi?id=1120361</a>

IMAP: after folder rename or move messages couldn't be opened anymore until
restart - works in an older TB version (&lt; 31)

Please follow that bug to see when the folder tree synchronization is fixed in
Thunderbird.
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c9" href="show_bug.cgi@id=26095.html#c9">
            #9</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-20 04:17:49 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" ><span class=""><a href="QuickFolders-tb-pb-sm-4.2.2pre34.xpi" name="attach_8116" title="4.2.2 prerelease 34">Created an attachment (id=8116)</a> <a href="https://www.mozdev.org/bugs/attachment.cgi?id=8116&amp;action=edit" title="4.2.2 prerelease 34">[details]</a></span>
4.2.2 prerelease 34

Yet another improvement.

We had the same problem when _moving_ folders within the tree (on the same
account) - this would break connections of tabs pointing to subfolders. This
version addresses this issue as well.

Test case (SeaMonkey):

Create the following folder / subfolder structure (children indented)

Read
Quickfolders
  test1
    <a href="show_bug.cgi@id=1.html" title="NEW - Many errors in js strict mode need fixing">Bug 1</a>

create QuickFolders tabs for test1 and <a href="show_bug.cgi@id=1.html" title="NEW - Many errors in js strict mode need fixing">Bug 1</a>

Move &quot;test1&quot; into the folder &quot;Read&quot;, resulting in this structure:

Read
  test1
    <a href="show_bug.cgi@id=1.html" title="NEW - Many errors in js strict mode need fixing">Bug 1</a>
Quickfolders

=&gt; Tabs for test1 and <a href="show_bug.cgi@id=1.html" title="NEW - Many errors in js strict mode need fixing">Bug 1</a> still work.
Tested in Sm + Tb. To do: test in Postbox 4
</pre>
    </div>
  <div class="bz_comment">
        <span class="bz_comment_head">
          <span class="comment_rule">-------</span> <i>Comment
          <a name="c10" href="show_bug.cgi@id=26095.html#c10">
            #10</a> From 
          <a href="mailto:axel.grude&#64;gmail.com">Axel Grude</a>
          2015-10-31 03:45:57 
          </i>
          <span class="comment_rule">-------</span>
        </span>
        


<pre class="bz_comment_text" >Released in version 4.2.2, 20/11/2015
</pre>
    </div>
</div>

</form>

<hr>
<i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">No search results available</font></i>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions">
    <div class="label">Actions: </div><ul class="links">
  <li><a href="https://www.mozdev.org/bugs/">Home</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="https://www.mozdev.org/bugs/buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" name="quicksearch">
    <input class="btn" type="submit" value="Find" id="find_bottom"></form></li>

  <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/report.cgi">Reports</a></li>

  <li>
    <span class="separator">| </span>
      <a href="https://www.mozdev.org/bugs/request.cgi">Requests</a></li>


      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/createaccount.cgi">New&nbsp;Account</a></li>
      



      

        
      <li><span class="separator">| </span><a href="https://www.mozdev.org/bugs/show_bug.cgi?id=26095&amp;GoAheadAndLogIn=1">Log&nbsp;In</a></li>
</ul>
  </li>

  
    
    
    

  


  
</ul>

  <div class="outro"></div>
</div>

</body>
</html>